@import "tailwindcss";
@import "tw-animate-css";
@import "shadcn/tailwind.css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/* Prevent iOS overscroll/bounce from revealing white outside the app */
html,
body,
#root {
  min-height: 100%;
  margin: 0;
  padding: 0;
  background: #0f172a;
}

html,
body {
  overscroll-behavior-y: none;
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    min-height: 100vh;
  }

  #root {
    min-height: 100vh;
  }
}
@keyframes slow-twinkle {
  0%,
  100% {
    opacity: 0.45;
  }
  50% {
    opacity: 0.7;
  }
}

/* ---------- Pixel background effects (Better Sleep) ---------- */

/* Crisp pixel stars using 1 element + lots of box-shadows */
/* Crisp pixel stars using viewport-based positions */
.pixel-stars,
.pixel-stars-dim {
  position: absolute;
  top: 0;
  left: 0;
  background: transparent;
  animation: stars-twinkle 5s ease-in-out infinite;
}

.pixel-stars {
  width: 2px;
  height: 2px;
  box-shadow:
    6vw 8vh #fff,
    14vw 5vh #fff,
    22vw 11vh #fff,
    30vw 7vh #fff,
    38vw 12vh #fff,
    46vw 6vh #fff,
    54vw 9vh #fff,
    62vw 4vh #fff,
    70vw 13vh #fff,
    78vw 6vh #fff,
    86vw 11vh #fff,
    94vw 5vh #fff,
    10vw 20vh #fff,
    18vw 24vh #fff,
    28vw 21vh #fff,
    36vw 26vh #fff,
    44vw 22vh #fff,
    52vw 25vh #fff,
    60vw 21vh #fff,
    68vw 27vh #fff,
    76vw 23vh #fff,
    84vw 26vh #fff,
    92vw 22vh #fff,
    8vw 34vh #fff,
    20vw 31vh #fff,
    32vw 36vh #fff,
    48vw 33vh #fff,
    58vw 38vh #fff,
    72vw 35vh #fff,
    88vw 32vh #fff;
  opacity: 0.9;
}

.pixel-stars-dim {
  width: 1px;
  height: 1px;
  animation: stars-twinkle 7s ease-in-out infinite;
  box-shadow:
    3vw 6vh rgba(196, 181, 253, 0.9),
    9vw 12vh rgba(255, 255, 255, 0.7),
    17vw 9vh rgba(147, 197, 253, 0.8),
    26vw 14vh rgba(255, 255, 255, 0.55),
    34vw 3vh rgba(196, 181, 253, 0.7),
    42vw 16vh rgba(255, 255, 255, 0.6),
    51vw 5vh rgba(147, 197, 253, 0.7),
    59vw 15vh rgba(255, 255, 255, 0.55),
    68vw 10vh rgba(196, 181, 253, 0.6),
    77vw 4vh rgba(255, 255, 255, 0.55),
    86vw 14vh rgba(147, 197, 253, 0.65),
    95vw 8vh rgba(255, 255, 255, 0.5),
    6vw 22vh rgba(196, 181, 253, 0.55),
    15vw 28vh rgba(255, 255, 255, 0.5),
    24vw 20vh rgba(147, 197, 253, 0.55),
    40vw 27vh rgba(255, 255, 255, 0.5),
    57vw 24vh rgba(196, 181, 253, 0.55),
    73vw 29vh rgba(255, 255, 255, 0.5),
    89vw 25vh rgba(147, 197, 253, 0.55);
  opacity: 0.7;
}
@keyframes stars-twinkle {
  0%,
  100% {
    opacity: 0.55;
  }
  50% {
    opacity: 0.9;
  }
}

/* Pixel crescent moon (simple block art) */
.pixel-moon {
  width: 6px;
  height: 6px;
  background: #c4b5fd;
  box-shadow:
    6px 0 #ddd6fe,
    12px 0 #bfdbfe,
    0 6px #a78bfa,
    6px 6px #ddd6fe,
    12px 6px #93c5fd,
    0 12px #a78bfa,
    6px 12px #c4b5fd,
    12px 12px #7dd3fc,
    6px 18px #a78bfa,
    12px 18px #93c5fd,
    12px 24px #7dd3fc;
  position: relative;
  transform: scale(2.2);
  transform-origin: top left;
  filter: drop-shadow(0 0 10px rgba(196, 181, 253, 0.25));
}

/* Cut-out to form crescent */
.pixel-moon::after {
  content: "";
  position: absolute;
  left: 8px;
  top: 6px;
  width: 10px;
  height: 18px;
  background: #070214; /* matches top sky */
}

@keyframes sky-sparkle-float {
  0% {
    opacity: 0;
    transform: translate3d(0, 6px, 0) scale(0.9);
  }
  15% {
    opacity: 0.55;
  }
  35% {
    opacity: 0.85;
    transform: translate3d(-6px, -2px, 0) scale(1);
  }
  55% {
    opacity: 0.65;
    transform: translate3d(-10px, -6px, 0) scale(1.02);
  }
  75% {
    opacity: 0.35;
    transform: translate3d(-14px, -8px, 0) scale(0.98);
  }
  100% {
    opacity: 0;
    transform: translate3d(-18px, -10px, 0) scale(0.92);
  }
}

@keyframes glow-star-float {
  0% {
    opacity: 0.25;
    transform: translate3d(0, 4px, 0) scale(0.9);
  }
  20% {
    opacity: 0.65;
  }
  50% {
    opacity: 1;
    transform: translate3d(var(--drift-x), var(--drift-y), 0) scale(1.05);
  }
  80% {
    opacity: 0.55;
  }
  100% {
    opacity: 0.25;
    transform: translate3d(0, 4px, 0) scale(0.92);
  }
}
